<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EMC Revision ‚Äì Phase Test 2 (MCQ)</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      max-width: 850px;
      margin: 20px auto;
      padding: 20px;
      background: #f8f9fa;
      color: #212529;
    }
    h1 {
      text-align: center;
      color: #1a3a6c;
      margin-bottom: 10px;
    }
    .question {
      background: white;
      padding: 18px;
      margin-bottom: 25px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      border-left: 3px solid #1a3a6c;
    }
    .question-text {
      margin-bottom: 12px;
      font-weight: 600;
      line-height: 1.4;
    }
    .option {
      margin: 6px 0;
    }
    label {
      display: block;
      padding: 6px;
      cursor: pointer;
      border-radius: 4px;
    }
    input[type="radio"] {
      margin-right: 8px;
    }
    .diagram {
      margin: 12px 0;
      max-width: 100%;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: white;
      text-align: center;
      padding: 8px 0;
    }
    .diagram img {
      max-width: 100%;
      height: auto;
      border: none;
      display: block;
      margin: 0 auto;
    }
    .diagram-caption {
      font-size: 0.85em;
      color: #6c757d;
      margin-top: 6px;
    }
    .wrong-answer {
      background-color: #f8d7da !important;
      border: 2px solid #dc3545 !important;
    }
    button {
      display: block;
      margin: 20px auto;
      padding: 12px 30px;
      background: #1a3a6c;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 1.1em;
      cursor: pointer;
    }
    button:hover:not(:disabled) {
      background: #132a4d;
    }
    button:disabled {
      background: #6c757d;
      cursor: not-allowed;
    }
    .total-score {
      text-align: center;
      font-size: 1.4em;
      font-weight: bold;
      margin-top: 20px;
      padding: 15px;
      background: #e9ecef;
      border-radius: 8px;
      min-height: 2em;
      opacity: 0;
      transition: opacity 0.4s ease-in-out;
    }
    .total-score.show {
      opacity: 1;
    }
  </style>
</head>
<body>
  <h1>Electrical Machines & Control</h1>
  <p style="text-align:center; color:#6c757d;">Phase Test 2 ‚Äì Multiple Choice Questions</p>

  <form id="mcqForm"></form>

  <button id="checkBtn" type="button" onclick="checkAnswers()">Check Answers</button>
  <div id="totalScore" class="total-score"></div>

  <script>
    // Fisher-Yates shuffle
    function shuffleArray(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    // Direct image URLs from your SharePoint links
    const threePointImg = "https://ibtebrunei-my.sharepoint.com/personal/reza_matlajim_ibte_edu_bn/_layouts/15/download.aspx?share=Ebu97v0PqQpLp_4ee-ScOx8BlMUX2nsBjPD9Sd9l2PoPlw";
    const fourPointImg = "https://ibtebrunei-my.sharepoint.com/personal/reza_matlajim_ibte_edu_bn/_layouts/15/download.aspx?share=EfbCkOwQxi9MtR5LxjoBn6YBDCQ06xwUUD-HuBtqShAe3w";

    const originalMcqs = [
      // ===== SET A (10) =====
      [
        "Which of the statements is true regarding a DC compound motor in regard to speed regulation and torque?",
        ["It offers poor speed regulation but high starting torque.", "It offers good speed regulation but poor starting torque.", "It offers poor speed regulation and poor starting torque.", "It offers good speed regulation and high starting torque."],
        3,
        false
      ],
      [
        "Which of the statements is true regarding a DC series motor in regard to speed regulation and torque?",
        ["It offers poor speed regulation but high starting torque.", "It offers good speed regulation but poor starting torque.", "It offers poor speed regulation and poor starting torque.", "It offers good speed regulation and high starting torque."],
        0,
        false
      ],
      [
        "State the main function of field windings of a DC motor?",
        ["To produce flux.", "To produce revolving flux.", "To increase net flux linkage.", "To reduce eddy current flow."],
        0,
        false
      ],
      [
        "With reference to three-point starter schematic diagram, as shown in the diagram below, state the function of terminal L.",
        ["Maintain armature power supply.", "Maintain NVC coil power supply.", "Maintain electromagnet power supply.", "Maintain shunt field coil and electromagnet power supply."],
        2,
        `<div class="diagram"><img src="${threePointImg}" alt="Three-point starter schematic"><div class="diagram-caption">Three-point starter</div></div>`
      ],
      [
        "With reference to four-point starter schematic diagram, as shown in the diagram below, state the function of terminal F.",
        ["Maintain armature power supply.", "Maintain NVC coil power supply.", "Maintain shunt field coil power supply.", "Maintain shunt field coil and NVC coil power supply."],
        2,
        `<div class="diagram"><img src="${fourPointImg}" alt="Four-point starter schematic"><div class="diagram-caption">Four-point starter</div></div>`
      ],
      [
        "Which of the statements is true regarding a cylindrical pole rotor in regard to frequency?",
        ["It requires low number of poles to attain the required frequency.", "It requires zero number of poles to attain the required frequency.", "It requires high number of poles to attain the required frequency.", "It requires medium number of poles to attain the required frequency."],
        0,
        false
      ],
      [
        "Which of the statements is true regarding a salient pole rotor in regard to frequency?",
        ["It requires low number of poles to attain the required frequency.", "It requires zero number of poles to attain the required frequency.", "It requires high number of poles to attain the required frequency.", "It requires medium number of poles to attain the required frequency."],
        2,
        false
      ],
      [
        "When is the perfect moment to close synchronize switches for bright lamp synchronization method?",
        ["In the end of bright period of all three lamps.", "In the middle of bright period of all three lamps.", "In the beginning of bright period of all three lamps.", "In between middle and end of bright period of all three lamps."],
        1,
        false
      ],
      [
        "Which of the following configurations belong to dark lamp synchronization method?",
        ["L1:R1-R2, L2:Y1-Y2, L3: B1-B2", "L1:R1-Y2, L2:Y1-B2, L3: B1-R2", "L2:R1-R2, L1:Y1-Y2, L3: B1-B2", "L2:R1-Y2, L1:Y1-B2, L3: B1-R2"],
        0,
        false
      ],
      [
        "What is the method to achieve equal frequency for both alternator and busbar before synchronization is done?",
        ["By controlling the speed of busbar.", "By controlling the speed of alternator.", "By controlling the DC excitation of busbar.", "By controlling the DC excitation of alternator."],
        1,
        false
      ],

      // ===== SET B (10) =====
      [
        "Which of the following emf equation belong to a long shunt DC motor?",
        ["Eb = Vt ‚Äì IaRa.", "Eb = Vt ‚Äì Ia (Ra ‚Äì Rse).", "Eb = Vt ‚Äì Ia (Ra + Rse).", "Eb = Vt ‚Äì IaRa ‚Äì ITRse"],
        2,
        false
      ],
      [
        "Which of the following speed equation belong to a series DC motor?",
        ["N ‚àù [Eb / ùúô].", "N ‚àù [Eb / Ia].", "N ‚àù [Eb / ùúôsh ‚àí ùúôse].", "N ‚àù [Eb / ùúôsh + ùúôse]."],
        1,
        false
      ],
      [
        "Which of the following speed equation belong to a cumulative compound DC motor?",
        ["N ‚àù [Eb / ùúô].", "N ‚àù [Eb / Ia].", "N ‚àù [Eb / ùúôsh ‚àí ùúôse].", "N ‚àù [Eb / ùúôsh + ùúôse]."],
        3,
        false
      ],
      [
        "With reference to four-point starter schematic diagram, as shown in the diagram below, state the function of terminal A.",
        ["Maintain armature power supply.", "Maintain NVC coil power supply.", "Maintain shunt field coil power supply.", "Maintain shunt field coil and NVC coil power supply."],
        0,
        `<div class="diagram"><img src="${fourPointImg}" alt="Four-point starter schematic"><div class="diagram-caption">Four-point starter</div></div>`
      ],
      [
        "With reference to four-point starter schematic diagram, as shown in the diagram below, state the function of terminal L.",
        ["Maintain armature power supply.", "Maintain NVC coil power supply.", "Maintain electromagnet power supply.", "Maintain shunt field coil and NVC coil power supply."],
        2,
        `<div class="diagram"><img src="${fourPointImg}" alt="Four-point starter schematic"><div class="diagram-caption">Four-point starter</div></div>`
      ],
      [
        "Which of the statements is true regarding a cylindrical pole rotor application?",
        ["It is generally used in low-speed applications.", "It is generally used in high-speed applications.", "It is generally used in medium speed applications.", "It is generally used in low and high-speed applications."],
        1,
        false
      ],
      [
        "Which of the statements is true regarding a salient pole rotor application?",
        ["It is generally used in low-speed applications.", "It is generally used in high-speed applications.", "It is generally used in medium speed applications.", "It is generally used in low and high-speed applications."],
        0,
        false
      ],
      [
        "What is the purpose of DC excitation of the alternator?",
        ["To induce emf in the rotor winding.", "To induce emf in the stator winding.", "To induce emf in the armature winding.", "To induce emf in the amortisseur winding."],
        1, // B is correct (index 1)
        false
      ],
      [
        "What is the purpose for controlling the speed of the alternator?",
        ["To ensure that the busbar and alternator have equal frequency.", "To ensure that the busbar and alternator have increased frequency.", "To ensure that the busbar and alternator have cumulative frequency.", "To ensure that the busbar and alternator have differential frequency."],
        0,
        false
      ],
      [
        "What will happen if the alternator is operated below its rated speed?",
        ["An increment in load led to a decrease in speed.", "An increment in load led to a decrease in voltage.", "An increment in load led to a decrease in frequency.", "An increment in load led to a decrease in induced emf."],
        0,
        false
      ],

      // ===== SET C (10) =====
      [
        "Which of the statements is true regarding a DC shunt motor with regard to its coil?",
        ["The coils have low number of turns and large conductor diameter.", "The coils have low number of turns and small conductor diameter.", "The coils have high number of turns and large conductor diameter.", "The coils have high number of turns and small conductor diameter."],
        3,
        false
      ],
      [
        "Which of the statements is true regarding a DC series motor with regard to its coil?",
        ["The coils have low number of turns and large conductor diameter.", "The coils have low number of turns and small conductor diameter.", "The coils have high number of turns and large conductor diameter.", "The coils have high number of turns and small conductor diameter."],
        0,
        false
      ],
      [
        "Which of the statements is true regarding a DC shunt motor in regard to speed regulation and torque?",
        ["It offers poor speed regulation but high starting torque.", "It offers poor speed regulation but poor starting torque.", "It offers good speed regulation and poor starting torque.", "It offers good speed regulation and high starting torque."],
        2,
        false
      ],
      [
        "With reference to three-point starter schematic diagram, as shown in the diagram below, state the function of terminal A.",
        ["Maintain armature power supply.", "Maintain NVC coil power supply.", "Maintain shunt field coil power supply.", "Maintain shunt field coil and NVC coil power supply."],
        0,
        `<div class="diagram"><img src="${threePointImg}" alt="Three-point starter schematic"><div class="diagram-caption">Three-point starter</div></div>`
      ],
      [
        "With reference to three-point starter schematic diagram, as shown in the diagram below, state the function of terminal F.",
        ["Maintain armature power supply.", "Maintain NVC coil power supply.", "Maintain shunt field coil power supply.", "Maintain shunt field coil and NVC coil power supply."],
        2,
        `<div class="diagram"><img src="${threePointImg}" alt="Three-point starter schematic"><div class="diagram-caption">Three-point starter</div></div>`
      ],
      [
        "Which of the statements is true regarding a cylindrical pole rotor with regard to its construction?",
        ["It has a small diameter and longer axial length.", "It has a large diameter and longer axial length.", "It has an inward projecting pole with shorter axial length.", "It has an outward projecting pole with shorter axial length."],
        0,
        false
      ],
      [
        "Which of the statements is true regarding a salient pole rotor with regard to its construction?",
        ["It has a small diameter and longer axial length.", "It has a large diameter and longer axial length.", "It has an inward projecting pole with shorter axial length.", "It has an outward projecting pole with shorter axial length."],
        3,
        false
      ],
      [
        "When is the perfect moment to close synchronize switches for dark lamp synchronization method?",
        ["In the end of dark period of all three lamps.", "In the middle of dark period of all three lamps.", "In the beginning of dark period of all three lamps.", "In between middle and end of dark period of all three lamps."],
        1,
        false
      ],
      [
        "Which of the following configurations belong to bright lamp synchronization method?",
        ["L1:R1-R2, L2:Y1-Y2, L3: B1-B2", "L1:R1-Y2, L2:Y1-B2, L3: B1-R2", "L2:R1-R2, L1:Y1-Y2, L3: B1-B2", "L2:R1-Y2, L1:Y1-B2, L3: B1-R2"],
        0,
        false
      ],
      [
        "What is the method to achieve equal voltage for both alternator and busbar before synchronization is done?",
        ["By controlling the speed of busbar.", "By controlling the speed of alternator.", "By controlling the DC excitation of busbar.", "By controlling the DC excitation of alternator."],
        3,
        false
      ]
    ];

    // Shuffle and render
    const mcqs = shuffleArray(originalMcqs);
    const form = document.getElementById('mcqForm');
    mcqs.forEach((q, index) => {
      const [text, options, correctIndex, diagramHtml] = q;
      const qNum = index + 1;
      const questionDiv = document.createElement('div');
      questionDiv.className = 'question';
      let optionsHtml = '';
      options.forEach((opt, i) => {
        const letter = String.fromCharCode(65 + i);
        optionsHtml += `<div class="option"><label><input type="radio" name="q${qNum}" value="${i}"> ${letter}) ${opt}</label></div>`;
      });
      questionDiv.innerHTML = `<div class="question-text">${qNum}. ${text}</div>${optionsHtml}${diagramHtml || ''}`;
      form.appendChild(questionDiv);
    });

    let hasChecked = false;
    function checkAnswers() {
      if (hasChecked) return;
      document.getElementById('checkBtn').textContent = 'Review Answers';
      document.getElementById('checkBtn').disabled = true;
      hasChecked = true;

      let score = 0;
      mcqs.forEach((q, index) => {
        const qNum = index + 1;
        const correctIndex = q[2];
        const selected = document.querySelector(`input[name="q${qNum}"]:checked`);
        document.querySelectorAll(`input[name="q${qNum}"]`).forEach(input => input.parentElement.classList.remove('wrong-answer'));

        if (selected) {
          if (parseInt(selected.value) === correctIndex) {
            score++;
          } else {
            selected.parentElement.classList.add('wrong-answer');
          }
        }
      });

      const scoreDiv = document.getElementById('totalScore');
      scoreDiv.textContent = `Score: ${score} / ${mcqs.length}`;
      scoreDiv.classList.add('show');
    }
  </script>
</body>
</html>