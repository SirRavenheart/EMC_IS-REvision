<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Electrical Machines & Control – SAQ Practice</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      max-width: 800px;
      margin: 30px auto;
      padding: 20px;
      background: #f8f9fa;
      color: #212529;
    }
    h1 {
      text-align: center;
      color: #1a3a6c;
      margin-bottom: 20px;
    }
    .question {
      background: white;
      padding: 16px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      border-left: 3px solid #1a3a6c;
    }
    .question-text {
      font-weight: 600;
      margin-bottom: 10px;
      line-height: 1.4;
    }
    .diagram {
      text-align: center;
      margin: 10px 0;
    }
    .diagram img {
      max-width: 100%;
      height: auto;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    textarea {
      width: 100%;
      height: 100px;
      padding: 10px;
      margin: 10px 0;
      font-family: inherit;
      border: 1px solid #ced4da;
      border-radius: 4px;
    }
    button {
      background: #1a3a6c;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 10px;
    }
    .feedback {
      margin-top: 10px;
      padding: 10px;
      background: #e9ecef;
      border-radius: 4px;
      display: none;
    }
    .score {
      font-weight: bold;
      color: #1a3a6c;
    }
  </style>
</head>
<body>
  <h1>Electrical Machines & Control – SAQ Practice</h1>

  <!-- Set A -->
  <div class="question">
    <div class="question-text">1. As shown in the diagram below, explain the speed regulation characteristic of a DC series motor when load is added. [6 marks]</div>
    <div class="diagram"><img src="Speed_regulation_curves_of_a_DC_motor.png" alt="Speed regulation curves"></div>
    <textarea id="q1" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(1)">Grade Answer</button>
    <div id="feedback1" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">2. Explain the basic principles of starting a DC motor, assuming that the back emf is yet to be developed. [6 marks]</div>
    <textarea id="q2" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(2)">Grade Answer</button>
    <div id="feedback2" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">3. As shown in the diagram below, explain the operation of the motor, assuming that the handle is moved to position 5. [4 marks]</div>
    <div class="diagram"><img src="Three_point_starter.png" alt="Three-point starter"></div>
    <textarea id="q3" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(3)">Grade Answer</button>
    <div id="feedback3" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">4. As shown in the diagram below, explain how the improvements can overcome its predecessor. [6 marks]</div>
    <div class="diagram"><img src="four_point_starter.png" alt="Four-point starter"></div>
    <textarea id="q4" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(4)">Grade Answer</button>
    <div id="feedback4" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">5. As shown in the diagram below, assuming that "start" push button was pressed momentarily before timer contactors had elapsed. [5 marks]</div>
    <div class="diagram"><img src="Inherent_time_lag_motor_starter.png" alt="Inherent time-lag starter"></div>
    <textarea id="q5" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(5)">Grade Answer</button>
    <div id="feedback5" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">6. As shown in the diagram below, explain the forward operation assuming that "R-start" push button was pressed momentarily. [3 marks]</div>
    <div class="diagram"><img src="Forward_reverse_motor_starter.png" alt="Forward-reverse starter"></div>
    <textarea id="q6" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(6)">Grade Answer</button>
    <div id="feedback6" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">7. Explain the working principles of starting a synchronous motor, assuming that it is operated via external prime mover. [5 marks]</div>
    <textarea id="q7" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(7)">Grade Answer</button>
    <div id="feedback7" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">8. Explain the working principles of starting a generator, assuming that D.C. excitation current is applied. [5 marks]</div>
    <textarea id="q8" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(8)">Grade Answer</button>
    <div id="feedback8" class="feedback"></div>
  </div>

  <!-- Set B -->
  <div class="question">
    <div class="question-text">9. As shown in the diagram below, explain how the speed of a DC shunt motor can be controlled. [6 marks]</div>
    <div class="diagram"><img src="DC_Shunt_motor_flux_control_method.png" alt="Flux control method"></div>
    <textarea id="q9" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(9)">Grade Answer</button>
    <div id="feedback9" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">10. As shown in the diagram below, explain how the speed of a DC series motor can be controlled. [6 marks]</div>
    <div class="diagram"><img src="DC_series_motor armature_control_method.png" alt="Armature control method"></div>
    <textarea id="q10" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(10)">Grade Answer</button>
    <div id="feedback10" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">11. As shown in the diagram below, explain the operation of the motor, assuming that the handle is moved to "RUN" position. [5 marks]</div>
    <div class="diagram"><img src="Three_point_starter.png" alt="Three-point starter"></div>
    <textarea id="q11" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(11)">Grade Answer</button>
    <div id="feedback11" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">12. As shown in the diagram below, explain the operation of the motor, assuming that the handle is moved to "RUN" position. [3 marks]</div>
    <div class="diagram"><img src="four_point_starter.png" alt="Four-point starter"></div>
    <textarea id="q12" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(12)">Grade Answer</button>
    <div id="feedback12" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">13. As shown in the diagram below, explain the operational procedures after all timer contactors had elapsed. [3 marks]</div>
    <div class="diagram"><img src="Inherent_time_lag_motor_starter.png" alt="Inherent time-lag starter"></div>
    <textarea id="q13" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(13)">Grade Answer</button>
    <div id="feedback13" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">14. As shown in the diagram below, explain the operational procedures assuming that "start" push button was pressed momentarily and the back emf insufficient. [3 marks]</div>
    <div class="diagram"><img src="Counter_emf_motor_starter.png" alt="Counter EMF starter"></div>
    <textarea id="q14" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(14)">Grade Answer</button>
    <div id="feedback14" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">15. As shown in the diagram below, explain the operational procedures assuming that "start" push button was pressed momentarily and the back emf sufficient. [4 marks]</div>
    <div class="diagram"><img src="Counter_emf_motor_starter.png" alt="Counter EMF starter"></div>
    <textarea id="q15" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(15)">Grade Answer</button>
    <div id="feedback15" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">16. Explain the working principles of starting a synchronous motor, assuming that the rotor is stationary. [5 marks]</div>
    <textarea id="q16" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(16)">Grade Answer</button>
    <div id="feedback16" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">17. Explain the working principles of starting a generator, assuming that D.C. excitation current is not applied. [5 marks]</div>
    <textarea id="q17" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(17)">Grade Answer</button>
    <div id="feedback17" class="feedback"></div>
  </div>

  <!-- Set C -->
  <div class="question">
    <div class="question-text">18. As shown in the diagram below, explain the speed regulation characteristic of a DC shunt motor when load is added. [5 marks]</div>
    <div class="diagram"><img src="Speed_regulation_curves_of_a_DC_motor.png" alt="Speed regulation curves"></div>
    <textarea id="q18" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(18)">Grade Answer</button>
    <div id="feedback18" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">19. Explain the need of having variable resistors when starting a DC motor. [5 marks]</div>
    <textarea id="q19" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(19)">Grade Answer</button>
    <div id="feedback19" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">20. Explain the reason for a DC shunt motor having thick field coils. [1 mark]</div>
    <textarea id="q20" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(20)">Grade Answer</button>
    <div id="feedback20" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">21. Explain the reason for a DC series motor having large field coils. [1 mark]</div>
    <textarea id="q21" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(21)">Grade Answer</button>
    <div id="feedback21" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">22. As shown in the diagram below, explain the operation of the motor, assuming that the handle is moved to position 1. [5 marks]</div>
    <div class="diagram"><img src="Three_point_starter.png" alt="Three-point starter"></div>
    <textarea id="q22" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(22)">Grade Answer</button>
    <div id="feedback22" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">23. As shown in the diagram below, explain the operation of the motor, assuming that the handle is moved to position 1. [5 marks]</div>
    <div class="diagram"><img src="four_point_starter.png" alt="Four-point starter"></div>
    <textarea id="q23" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(23)">Grade Answer</button>
    <div id="feedback23" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">24. As shown in the diagram below, explain the operational procedures when timer contactors elapsed successively. [3 marks]</div>
    <div class="diagram"><img src="Inherent_time_lag_motor_starter.png" alt="Inherent time-lag starter"></div>
    <textarea id="q24" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(24)">Grade Answer</button>
    <div id="feedback24" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">25. As shown in the diagram below, explain the forward operation assuming that "F-start" push button was pressed momentarily. [5 marks]</div>
    <div class="diagram"><img src="Forward_reverse_motor_starter.png" alt="Forward-reverse starter"></div>
    <textarea id="q25" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(25)">Grade Answer</button>
    <div id="feedback25" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">26. Explain the working principles of starting a synchronous motor, assuming that it is operated via induction starting. [5 marks]</div>
    <textarea id="q26" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(26)">Grade Answer</button>
    <div id="feedback26" class="feedback"></div>
  </div>

  <div class="question">
    <div class="question-text">27. State the conditions prior to synchronizing an alternator to a bus network. [5 marks]</div>
    <textarea id="q27" placeholder="Type your answer here..."></textarea>
    <button onclick="grade(27)">Grade Answer</button>
    <div id="feedback27" class="feedback"></div>
  </div>

  <script>
    // Exact template answers from your mark schemes (verbatim)
    const modelConcepts = {
      1: [
        "armature current increased",
        "which consequently reduced the back emf",
        "speed",
        "but led to a rise in torque",
        "flux may reach saturation",
        "speed may never recover to its previous state"
      ],
      2: [
        "armature current will be very high",
        "since armature is not rotating",
        "back emf increases",
        "as motor develop speed",
        "which consequently reduce torque",
        "and armature current"
      ],
      3: [
        "resistance will be at minimum",
        "consequently, motor speed will rise",
        "however, nvc coil",
        "and shunt field current will be reduced"
      ],
      4: [
        "brass arc allows direct connection to supply for shunt field",
        "and nvc coils",
        "terminal n allows the nvc coil",
        "to be linked to the power supply independently",
        "resistance, r, maintain the current flowing through the nvc coil",
        "therefore, nvc coil can maintain the handle at “run” position"
      ],
      5: [
        "contactor coils, 1l and 2l will be energized",
        "all of 1l and 2l normally open contactors becomes closed",
        "timer 1a coil will be energized simultaneously",
        "the motor is connected to the supply line at maximum resistance"
      ],
      6: [
        "reverse coil, r becomes energized",
        "current flows through contactor r1 and r2",
        "armature terminal a2 becomes positive with respect to a1"
      ],
      7: [
        "the pony motor will drive the rotor of the synchronous motor",
        "when the rotor reached near synchronous speed",
        "dc excitation is applied to the rotor winding",
        "stator and rotor poles will be locked in synchronism",
        "rotor can now run at synchronous speed"
      ],
      8: [
        "the rotor is rotated via a prime mover",
        "until it reaches its rated speed",
        "dc excitation current is applied to the rotor winding",
        "the rotating field flux from the rotor cuts stator winding",
        "hence inducing emf to the armature coil"
      ],
      9: [
        "the supply is kept constant",
        "variable resistance, rf is connected in series with shunt field winding",
        "increasing resistance rf",
        "will weaken shunt field flux",
        "which consequently increases speed",
        "therefore, the motor can be run above its rated speed"
      ],
      10: [
        "the supply is kept constant",
        "variable resistance, r is connected in series with the armature and series field winding",
        "increasing resistance r",
        "will reduce armature voltage",
        "which consequently reduces speed",
        "therefore, the motor can be run below its rated speed"
      ],
      11: [
        "resistance will be bypassed",
        "armature is directly connected to the supply line",
        "consequently, motor will run at its rated speed",
        "however, nvc coil",
        "and shunt field current will be at minimum"
      ],
      12: [
        "resistance will be bypassed",
        "armature is directly connected to the supply line",
        "consequently, motor will run at its rated speed"
      ],
      13: [
        "resistances will be fully bypassed",
        "the motor will be connected directly to the supply line",
        "the motor will run at its rated speed"
      ],
      14: [
        "contactor coil, c becomes energized",
        "all of its normally open contacts become closed",
        "the motor will be connected to the supply line at full resistance"
      ],
      15: [
        "contactor coil, ce becomes energized",
        "ce normally open contactor become closed",
        "starter resistance is fully bypassed",
        "the motor will be running at its rated speed"
      ],
      16: [
        "the rotor will experience both attraction",
        "and repulsion force",
        "the rotor will not be able to rotate in either direction due to inertia",
        "therefore, the resultant torque is zero",
        "stator and rotor poles will not be locked in synchronism"
      ],
      17: [
        "the rotor is rotated via a prime mover",
        "until it reaches its rated speed",
        "no rotating field flux from the rotor will cut stator winding",
        "hence no emf will be induced",
        "to the armature coil"
      ],
      18: [
        "armature current increased",
        "which consequently reduced the back emf",
        "speed",
        "but led to a rise in torque",
        "the elevated torque increases the speed until it reached stability"
      ],
      19: [
        "armature current will be very high",
        "it can cause excessive heat / sparks",
        "and consequently damage commutators/brushes",
        "excessive torque may also be developed",
        "and may cause damages to its interconnected mechanical equipment"
      ],
      20: [
        "to increase net flux linkage"
      ],
      21: [
        "to accommodate full load current"
      ],
      22: [
        "armature is connected to the supply line at maximum resistance",
        "armature starting current will be minimum",
        "however, nvc coil",
        "and shunt field current will be maximum",
        "motor speed will be at minimum"
      ],
      23: [
        "armature is connected to the supply line at maximum resistance",
        "armature starting current will be minimum",
        "nvc coil",
        "and shunt field current will be at maximum",
        "motor speed will be at minimum"
      ],
      24: [
        "timer contactors will activate successively after a certain time lapse",
        "resistances will be reduced successively",
        "therefore, motor speed increases"
      ],
      25: [
        "forward coil, f becomes energized",
        "current flows through contactor f1",
        "and f2",
        "armature terminal a1 becomes positive",
        "with respect to a2"
      ],
      26: [
        "the motor is started like an induction motor",
        "when the rotor reached near synchronous speed",
        "dc excitation is applied to the rotor winding",
        "stator and rotor poles will be locked in synchronism",
        "rotor can now run at synchronous speed"
      ],
      27: [
        "phase sequence of the busbar voltages and alternator voltage must be the same",
        "the alternator's induced voltages and busbar voltages must be equal",
        "alternator voltage frequency and the frequency of the busbar voltages must be equal",
        "synchronization can be achieved via a set of three synchronizing lamps",
        "or synchronoscope"
      ]
    };

    function normalize(text) {
      return text
        .toLowerCase()
        .replace(/[^a-z0-9\s]/g, " ")
        .replace(/\s+/g, " ")
        .trim();
    }

    function grade(qNum) {
      const studentAnswer = document.getElementById(`q${qNum}`).value;
      if (!studentAnswer.trim()) {
        alert("Please enter an answer.");
        return;
      }

      const concepts = modelConcepts[qNum] || [];
      const normAnswer = normalize(studentAnswer);
      let score = 0;
      let missing = [];

      for (let concept of concepts) {
        const normConcept = normalize(concept);
        const words = normConcept.split(" ").filter(Boolean);
        let found = 0;
        for (const w of words) {
          if (normAnswer.includes(w)) found++;
        }
        if ((found / words.length) >= 0.6) {
          score++;
        } else {
          missing.push(concept);
        }
      }

      const maxMarks = concepts.length;
      const finalScore = Math.min(score, maxMarks);

      let feedback = `<div class="score">Score: ${finalScore} / ${maxMarks}</div>`;
      if (finalScore < maxMarks) {
        const hints = missing.slice(0, maxMarks - finalScore);
        feedback += `<div>Missing crucial information related to: ${hints.join(', ')}</div>`;
      } else {
        feedback += "<div>Excellent! All key points covered.</div>";
      }

      document.getElementById(`feedback${qNum}`).innerHTML = feedback;
      document.getElementById(`feedback${qNum}`).style.display = 'block';
    }
  </script>
</body>

</html>
